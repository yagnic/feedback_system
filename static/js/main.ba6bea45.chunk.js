(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){},11:function(e,t,a){e.exports=a(21)},21:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(5),r=a.n(l),o=(a(10),a(23));function c(){const[e,t]=Object(n.useState)(null),[a,l]=Object(n.useState)([]),[r,c]=Object(n.useState)(null),[m,i]=Object(n.useState)(null),[d,u]=Object(n.useState)(""),[p,E]=Object(n.useState)(""),[g,v]=Object(n.useState)("Easy"),[h,f]=Object(n.useState)("pending"),[b,N]=Object(n.useState)(""),[y,w]=Object(n.useState)(""),[q,j]=Object(n.useState)([]),[S,C]=Object(n.useState)(null),[k,x]=Object(n.useState)(""),[I,O]=Object(n.useState)(1),[Q,A]=Object(n.useState)(5);Object(n.useEffect)(()=>{e&&(console.log("Fetching questions for:",e),o.a.get(`http://127.0.0.1:5000/questions/${e}`,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("Questions fetched successfully:",e.data),l(e.data)}).catch(e=>{console.error("Error fetching questions:",e)}))},[e,r]),Object(n.useEffect)(()=>{"admin"===r&&(console.log("Fetching users for admin"),o.a.get("http://127.0.0.1:5000/users",{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("Users fetched successfully:",e.data),j(e.data)}).catch(e=>{console.error("Error fetching users:",e)}))},[r]);const P=(e,a)=>{e&&a?(console.log("Attempting login for:",e),o.a.post("http://127.0.0.1:5000/login",{username:e,password:a},{headers:{"Content-Type":"application/json"}}).then(a=>{"Login successful"===a.data.message?(console.log("Login successful for:",e),t(e),c(a.data.role),N("")):N("Invalid username or password")}).catch(e=>{N("Invalid username or password"),console.error("Login error:",e)})):N("Please fill in all fields")};return s.a.createElement("div",{className:"container"},e?s.a.createElement("div",{className:"dashboard"},"admin"===r&&s.a.createElement("div",{className:"admin-panel mt-5"},s.a.createElement("h3",null,"Admin Panel"),s.a.createElement("div",{className:"card p-4"},s.a.createElement("h4",null,"Assign Questions to Teachers"),s.a.createElement("div",{className:"mb-3"},s.a.createElement("select",{className:"form-select",onChange:e=>{const t=e.target.value;console.log("Selected teacher username:",t),t?(e=>{console.log("Fetching user ID for username:",e),o.a.get(`http://127.0.0.1:5000/user-id/${e}`,{headers:{"Content-Type":"application/json"}}).then(t=>{console.log("User ID fetched successfully for username:",e,"User ID:",t.data.user_id),C(t.data.user_id)}).catch(t=>{console.error("Error fetching user ID for username:",e,t)})})(t):console.warn("No teacher selected")}},s.a.createElement("option",{value:""},"Select a teacher"),q.map(e=>s.a.createElement("option",{key:e.id,value:e.username},e.username)))),s.a.createElement("div",{className:"mb-3"},s.a.createElement("label",null,"Question Start:"),s.a.createElement("input",{type:"number",className:"form-control",value:I,onChange:e=>O(parseInt(e.target.value))})),s.a.createElement("div",{className:"mb-3"},s.a.createElement("label",null,"Question End:"),s.a.createElement("input",{type:"number",className:"form-control",value:Q,onChange:e=>A(parseInt(e.target.value))})),s.a.createElement("button",{className:"btn btn-success",onClick:()=>(()=>{if(S&&I>0&&Q>=I){console.log("Assigning questions:",{selectedUserId:S,questionStart:I,questionEnd:Q});try{o.a.post("http://127.0.0.1:5000/assign-questions",{user_id:S,question_start:I,question_end:Q},{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("Questions assigned successfully:",e.data),x("Questions assigned successfully.")}).catch(e=>{x("Error assigning questions. Please try again."),console.error("Error assigning questions:",e)})}catch(e){console.error("Unexpected error while assigning questions:",e)}}else console.warn("Invalid input for assigning questions:",{selectedUserId:S,questionStart:I,questionEnd:Q}),x("Please select a user and provide a valid range of questions (start and end must be greater than 0, and start must be less than or equal to end).")})()},"Assign Questions"),k&&s.a.createElement("p",{className:"mt-2 text-center text-info"},k))),s.a.createElement("h2",{className:"mt-5"},"Welcome, ",e),s.a.createElement("button",{className:"btn btn-warning mt-3",onClick:()=>{console.log("User logged out:",e),t(null),N(""),w(""),c(null),x(""),l([])}},"Logout"),s.a.createElement("div",{className:"question-section mt-5"},s.a.createElement("h3",null,"Question Feedback Page"),s.a.createElement("select",{onChange:e=>{const t=parseInt(e.target.value);console.log("Question selected:",t),i(t);const n=a.find(e=>e.id===t);n&&(u(n.new_question||""),E(n.feedback||""),v(n.difficulty||"Easy"),f(n.approved?"approved":"pending"))},value:m||"",className:"form-select mb-4"},s.a.createElement("option",{value:"",disabled:!0},"Select a question"),a.map(e=>s.a.createElement("option",{key:e.id,value:e.id},"Question ",e.id))),null!==m&&s.a.createElement("div",{className:"question-details card p-4 mb-4"},s.a.createElement("div",{className:"mb-3"},s.a.createElement("h4",null,"Old Question:"),s.a.createElement("p",null,a.find(e=>e.id===m).old_question)),s.a.createElement("div",{className:"mb-3"},s.a.createElement("h4",null,"New Question:"),s.a.createElement("p",null,a.find(e=>e.id===m).new_question||"Not edited yet")),s.a.createElement("div",{className:"mb-3"},s.a.createElement("h4",null,"Edit Question:"),s.a.createElement("textarea",{value:d,onChange:e=>u(e.target.value),className:"form-control mb-3",rows:"3"})),s.a.createElement("div",{className:"mb-3"},s.a.createElement("h4",null,"Difficulty Level:"),s.a.createElement("select",{value:g,onChange:e=>v(e.target.value),className:"form-select mb-3"},s.a.createElement("option",{value:"Easy"},"Easy"),s.a.createElement("option",{value:"Medium"},"Medium"),s.a.createElement("option",{value:"Hard"},"Hard"))),s.a.createElement("div",{className:"mb-3"},s.a.createElement("h4",null,"Provide Your Feedback:"),s.a.createElement("textarea",{value:p,onChange:e=>E(e.target.value),className:"form-control mb-3",rows:"4"})),s.a.createElement("div",{className:"mb-3"},s.a.createElement("h4",null,"Approval Status:"),s.a.createElement("select",{value:h,onChange:e=>f(e.target.value),className:"form-select mb-3"},s.a.createElement("option",{value:"pending"},"Pending"),s.a.createElement("option",{value:"approved"},"Approved"),s.a.createElement("option",{value:"disapproved"},"Disapproved"))),s.a.createElement("button",{className:"btn btn-primary",onClick:()=>{m&&d?(console.log("Editing question:",m),o.a.post("http://127.0.0.1:5000/questions/edit",{question_id:m,new_question:d,editor:e,difficulty:g,feedback:p,approval_status:h},{headers:{"Content-Type":"application/json"}}).then(t=>{console.log("Question edited successfully:",t.data),l(t=>t.map(t=>t.id===m?{...t,new_question:d,updated:!0,approved:"approved"===h,editor:e,difficulty:g,feedback:p}:t)),u(""),E(""),v("Easy"),f("pending")}).catch(e=>{console.error("Error editing question:",e)})):console.warn("Please provide the new question text to save changes.")}},"Save Changes"))),s.a.createElement("div",{className:"feedback-summary"},s.a.createElement("h3",null,"Approved Feedbacks"),a.filter(e=>e.approved).map(e=>s.a.createElement("div",{key:e.id,className:"card p-3 mb-3"},s.a.createElement("p",null,"Question ",e.id," - Feedback: ",e.feedback," (Approved)"))))):s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4 offset-md-4 mt-5"},s.a.createElement("div",{className:"card p-4"},s.a.createElement("h2",{className:"text-center"},"Teacher Login"),s.a.createElement("div",{className:"mb-3"},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",id:"username"})),s.a.createElement("div",{className:"mb-3"},s.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",id:"password"})),s.a.createElement("button",{className:"btn btn-primary w-100",onClick:()=>P(document.getElementById("username").value,document.getElementById("password").value)},"Login as Teacher"),b&&s.a.createElement("p",{className:"text-danger mt-2 text-center"},b))),s.a.createElement("div",{className:"col-md-4 offset-md-4 mt-3"},s.a.createElement("div",{className:"card p-4"},s.a.createElement("h2",{className:"text-center"},"Admin Login"),s.a.createElement("div",{className:"mb-3"},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"Admin Username",id:"admin-username"})),s.a.createElement("div",{className:"mb-3"},s.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",id:"admin-password"})),s.a.createElement("button",{className:"btn btn-danger w-100",onClick:()=>P(document.getElementById("admin-username").value,document.getElementById("admin-password").value)},"Login as Admin"),b&&s.a.createElement("p",{className:"text-danger mt-2 text-center"},b))),s.a.createElement("div",{className:"col-md-4 offset-md-4 mt-3"},s.a.createElement("div",{className:"card p-4"},s.a.createElement("h2",{className:"text-center"},"Register as Teacher"),s.a.createElement("div",{className:"mb-3"},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",id:"register-username"})),s.a.createElement("div",{className:"mb-3"},s.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",id:"register-password"})),s.a.createElement("button",{className:"btn btn-success w-100",onClick:()=>(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"teacher";e&&t?(console.log("Attempting registration for:",e),o.a.post("http://127.0.0.1:5000/register",{username:e,password:t,role:a},{headers:{"Content-Type":"application/json"}}).then(t=>{console.log("Registration successful for:",e),w("User registered successfully. You can now log in."),N("")}).catch(e=>{w("Registration failed: Username may already exist"),N(""),console.error("Registration error:",e)})):(w("Please fill in all fields"),N(""))})(document.getElementById("register-username").value,document.getElementById("register-password").value,"teacher")},"Register as Teacher"),y&&s.a.createElement("p",{className:"text-success mt-2 text-center"},y)))))}r.a.render(s.a.createElement(c,null),document.getElementById("root")),r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(c,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.ba6bea45.chunk.js.map